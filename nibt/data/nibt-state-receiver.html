<link rel="import" href="bower_components/polymer/polymer.html">

<polymer-element name="nibt-state-receiver" attributes="url">
  <template>
  </template>

  <script>
    Polymer({
      ws: null, 
      url: '',
      ready: function(){
        this.ws = new WebSocket(this.url);
        this.ws.onmessage = this.onMessage.bind(this);
      },
      onMessage: function(evt){
        var msg = JSON.parse(evt.data);
        this.fire(msg.sid+"-"+msg.type, msg.data);
      }
    });
  </script>
</polymer-element>
